# UI走查用例生成助手 - 开发和部署规范

## 📋 项目信息

### 应用地址
- **本地开发**：http://localhost:8501
- **线上地址**：https://ui-test-case-generator-4prbvmc7qcuzsacxqnhmld.streamlit.app/
- **GitHub仓库**：https://github.com/xianchunyang911-debug/ui-test-case-generator

### 核心文件
1. `streamlit_app.py` - 主程序（Web界面）
2. `ai_generator.py` - AI生成器（核心逻辑）
3. `AI生成UI走查用例规则.md` - 规则文档（必须遵循）
4. `requirements.txt` - Python依赖

## 🔄 标准开发流程（必须遵守）

```
步骤1: 本地修改代码
   ↓
步骤2: 本地测试运行
   命令：streamlit run streamlit_app.py --server.port 8501
   访问：http://localhost:8501
   ↓
步骤3: 确认功能正常
   - 测试所有修改的功能
   - 确保没有错误
   - 验证用例生成符合规则
   ↓
步骤4: 推送到GitHub
   方式A：GitHub网页直接编辑
   方式B：GitHub Desktop推送
   方式C：命令行推送
   ↓
步骤5: 等待自动部署
   - Streamlit Cloud自动检测更改
   - 自动重新部署（2-3分钟）
   - 可在 https://share.streamlit.io/ 查看进度
   ↓
步骤6: 验证线上应用
   访问：https://ui-test-case-generator-4prbvmc7qcuzsacxqnhmld.streamlit.app/
   测试所有功能
```

## 📝 推送代码的三种方式

### 方式1：GitHub网页编辑（最简单）

1. 访问：https://github.com/xianchunyang911-debug/ui-test-case-generator
2. 点击要修改的文件
3. 点击编辑按钮（铅笔图标）
4. 修改代码
5. 填写提交信息
6. 点击 "Commit changes"

### 方式2：GitHub Desktop（推荐）

1. 打开 GitHub Desktop
2. 选择仓库：ui-test-case-generator
3. 查看更改的文件
4. 填写提交信息
5. 点击 "Commit to main"
6. 点击 "Push origin"

### 方式3：命令行

```bash
# 添加所有更改
git add .

# 提交更改
git commit -m "描述你的更改"

# 推送到GitHub
git push origin main
```

## 🎯 开发规范

### 1. 代码修改规范

#### 修改前必须做的事
- ✅ 明确修改目的
- ✅ 了解影响范围
- ✅ 备份重要代码（如果是大改动）

#### 修改时注意事项
- ✅ 保持代码简洁
- ✅ 添加必要的注释
- ✅ 遵循现有代码风格
- ✅ 不要删除关键功能

#### 修改后必须做的事
- ✅ 本地测试所有功能
- ✅ 检查是否有错误
- ✅ 验证用例生成质量

### 2. 测试规范

#### 本地测试清单
- [ ] 应用能正常启动
- [ ] 文件上传功能正常（.md/.txt/.docx）
- [ ] AI配置功能正常
- [ ] 用例生成功能正常
- [ ] 下载功能正常
- [ ] 没有报错信息

#### 线上验证清单
- [ ] 应用能正常访问
- [ ] 所有功能与本地一致
- [ ] 生成的用例符合规则
- [ ] 下载的文件格式正确

### 3. 提交信息规范

#### 好的提交信息示例
```
✅ 添加批量生成功能
✅ 修复文件上传bug
✅ 优化AI生成速度
✅ 更新UI界面布局
✅ 调整用例生成规则
```

#### 不好的提交信息示例
```
❌ 更新
❌ 修改
❌ fix
❌ update
```

## 🔧 常见修改场景

### 场景1：修改界面文字

**文件**：`streamlit_app.py`

**步骤**：
1. 找到要修改的文字
2. 修改为新文字
3. 本地测试查看效果
4. 推送到GitHub

### 场景2：调整AI生成规则

**文件**：`AI生成UI走查用例规则.md`

**步骤**：
1. 修改规则文档
2. 本地测试生成效果
3. 确认用例符合新规则
4. 推送到GitHub

### 场景3：添加新功能

**文件**：`streamlit_app.py` 和/或 `ai_generator.py`

**步骤**：
1. 在对应文件中添加代码
2. 本地测试新功能
3. 确认不影响现有功能
4. 推送到GitHub

### 场景4：添加新的Python库

**文件**：`requirements.txt`

**步骤**：
1. 在 `requirements.txt` 添加新库
2. 本地安装测试：`pip install -r requirements.txt`
3. 确认应用正常运行
4. 推送到GitHub

## ⚠️ 重要注意事项

### 1. 必须遵循的规则

- ✅ **永远先本地测试**：任何修改都必须先在本地测试
- ✅ **确认无误再推送**：确保没有错误才能推送到GitHub
- ✅ **保持规则文档同步**：修改规则后要测试生成效果
- ✅ **不要删除核心文件**：4个核心文件不能删除

### 2. 禁止的操作

- ❌ 未测试就直接推送
- ❌ 删除核心文件
- ❌ 修改文件名（会导致部署失败）
- ❌ 在生产环境直接测试

### 3. 遇到问题时

#### 本地运行错误
1. 查看终端错误信息
2. 检查代码语法
3. 确认依赖已安装
4. 回滚到上一个版本

#### 部署失败
1. 访问 https://share.streamlit.io/
2. 查看部署日志
3. 找到错误原因
4. 修复后重新推送

#### 线上应用错误
1. 查看 Streamlit Cloud 日志
2. 对比本地和线上差异
3. 检查是否有文件缺失
4. 必要时回滚代码

## 📊 版本管理

### 重要更新记录

| 日期 | 版本 | 更新内容 | 负责人 |
|------|------|----------|--------|
| 2024-11-11 | v1.0 | 初始部署到Streamlit Cloud | - |
| - | - | - | - |

### 如何回滚版本

如果新版本有问题，可以回滚：

1. **在GitHub网页**：
   - 找到之前的提交
   - 点击 "Revert"

2. **使用命令行**：
   ```bash
   # 查看提交历史
   git log
   
   # 回滚到指定版本
   git revert <commit-id>
   git push
   ```

## 🎯 开发最佳实践

### 1. 小步快跑
- 每次只改一个功能
- 改完立即测试
- 测试通过立即推送

### 2. 保持简单
- 代码越简单越好
- 功能越清晰越好
- 不要过度设计

### 3. 及时备份
- 重要修改前先备份
- 可以创建新分支测试
- 确认无误再合并

### 4. 文档同步
- 修改功能后更新文档
- 记录重要的修改
- 方便以后查找

## 📞 获取帮助

### 遇到问题时

1. **查看文档**：
   - 本文档
   - `Streamlit_Cloud_部署指南.md`
   - `规则验证说明.md`

2. **查看日志**：
   - 本地：终端输出
   - 线上：Streamlit Cloud 日志

3. **搜索解决方案**：
   - Streamlit文档：https://docs.streamlit.io
   - GitHub Issues：搜索类似问题

## 🎉 总结

### 核心原则
1. **先测试，后推送**
2. **小改动，快迭代**
3. **保持简单，避免复杂**
4. **遵循规则，确保质量**

### 记住这个流程
```
修改 → 测试 → 推送 → 部署 → 验证
```

### 保持这些文件同步
- 本地代码
- GitHub仓库
- Streamlit Cloud应用

---

**最后更新**：2024-11-11
**文档版本**：v1.0
**维护者**：xianchunyang911-debug
