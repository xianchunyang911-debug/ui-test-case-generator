# 建议选项功能说明

## ✅ 问题已修复

建议选项功能现在已经完全正常工作了！无论是使用AI生成还是模板生成，都会根据选中的建议选项生成相应的额外用例。

## 🎯 功能说明

### 建议选项类别

系统提供4个建议选项，每个选项会生成特定类型的额外用例：

#### 1. 全局页面
生成3个额外用例，关注通用组件：
- 页面头部（Logo、导航菜单、用户信息）
- 页面底部（版权信息、链接）
- 全局提示组件（Toast、Message）

#### 2. 场景流程
生成3个额外用例，关注操作流程：
- 完整操作流程（从进入到完成目标）
- 多步骤表单（步骤指示器、上一步/下一步）
- 状态流转（草稿→待审核→已发布）

#### 3. 异常场景
生成4个额外用例，关注错误处理：
- 输入验证（必填项、格式、长度、特殊字符）
- 网络异常处理（超时、断网、服务器错误）
- 权限异常处理（无权限、登录过期）
- 边界条件（空数据、极限数据量）

#### 4. 上下游验证
生成3个额外用例，关注数据流转：
- 数据传递（页面间参数传递、数据回显）
- 状态同步（操作后相关页面/组件更新）
- 接口调用（请求参数、响应数据处理）

## 📊 用例数量对比

### 不选择建议选项
- 基础用例：8个
- 总计：**8个用例**

### 选择全部建议选项
- 基础用例：8个
- 全局页面：+3个
- 场景流程：+3个
- 异常场景：+4个
- 上下游验证：+3个
- 总计：**21个用例**（增加13个）

### 选择部分建议选项（例如：全局页面 + 异常场景）
- 基础用例：8个
- 全局页面：+3个
- 异常场景：+4个
- 总计：**15个用例**（增加7个）

## 🚀 使用方法

### 步骤1: 上传文档并识别模块
1. 上传需求文档
2. 点击"模块/页面识别"
3. 选择需要的模块

### 步骤2: 选择建议选项
在模块列表下方，勾选需要的建议选项：
- ☑ 全局页面
- ☑ 场景流程
- ☑ 异常场景
- ☑ 上下游验证

### 步骤3: 生成用例
点击"生成UI走查用例"按钮

### 步骤4: 查看结果
- 切换到"生成结果"标签页
- 查看生成的用例数量
- 下载CSV文件

## 💡 使用建议

### 场景1: 快速检验（不选建议选项）
**适用**: 时间紧张，只需要基础检验
- 不勾选任何建议选项
- 生成8个基础用例
- 快速完成核心功能检验

### 场景2: 全面检验（选择全部建议选项）
**适用**: 重要功能，需要全面检验
- 勾选全部4个建议选项
- 生成21个用例
- 覆盖所有测试场景

### 场景3: 重点检验（选择部分建议选项）
**适用**: 针对特定问题进行检验

**示例1**: 关注用户体验
- 勾选：全局页面 + 场景流程
- 生成14个用例
- 重点检验界面一致性和操作流程

**示例2**: 关注系统稳定性
- 勾选：异常场景 + 上下游验证
- 生成15个用例
- 重点检验错误处理和数据流转

**示例3**: 关注新功能
- 勾选：场景流程 + 上下游验证
- 生成14个用例
- 重点检验功能流程和数据交互

## 🎨 生成模式对比

### 模板生成模式（不使用AI）
- ✅ 免费，无需配置
- ✅ 速度快
- ✅ 支持建议选项
- ⚠️ 用例相对通用
- ⚠️ 不能根据具体需求定制

### AI生成模式（需要API Key）
- ✅ 智能理解需求
- ✅ 用例更具体、更贴合实际
- ✅ 支持建议选项
- ✅ 建议选项效果更明显
- ⚠️ 需要配置API Key
- ⚠️ 有一定成本

## 📝 示例对比

### 不选建议选项
```
生成8个基础用例：
1. 页面标题 - 视觉一致性原则
2. 按钮状态 - 组件状态完整性原则
3. 操作反馈 - 交互与反馈原则
4. 输入框状态 - 组件状态完整性原则
5. 页面布局 - 布局与响应式原则
6. 错误提示 - 异常与负向流程验证
7. 文案准确性 - 内容与文案准确性原则
8. 加载状态 - 交互与反馈原则
```

### 选择"全局页面"
```
基础8个 + 额外3个 = 11个用例：
...（基础8个）
9. 页面头部 - 视觉一致性原则
10. 页面底部 - 视觉一致性原则
11. 全局提示组件 - 交互与反馈原则
```

### 选择"异常场景"
```
基础8个 + 额外4个 = 12个用例：
...（基础8个）
9. 输入验证 - 异常与负向流程验证
10. 网络异常处理 - 异常与负向流程验证
11. 权限异常处理 - 异常与负向流程验证
12. 边界条件 - 异常与负向流程验证
```

## ✅ 验证方法

### 方法1: 查看用例数量
- 不选建议选项：每个模块8个用例
- 选择1个建议选项：每个模块11-12个用例
- 选择全部建议选项：每个模块21个用例

### 方法2: 查看用例内容
打开生成的CSV文件，查找建议选项相关的用例：
- 全局页面：查找"页面头部"、"页面底部"、"全局提示组件"
- 场景流程：查找"完整操作流程"、"多步骤表单"、"状态流转"
- 异常场景：查找"输入验证"、"网络异常"、"权限异常"、"边界条件"
- 上下游验证：查找"数据传递"、"状态同步"、"接口调用"

### 方法3: 运行测试脚本
```bash
python test_categories_template.py
```

应该看到：
```
=== 测试1: 不带建议选项 ===
生成用例数: 8

=== 测试2: 带全部建议选项 ===
生成用例数: 21

额外生成的用例:
1. 页面头部 - 视觉一致性原则
2. 页面底部 - 视觉一致性原则
...
```

## 🎉 开始使用

1. 打开应用：http://localhost:8501
2. 上传文档并识别模块
3. **勾选需要的建议选项**
4. 生成用例
5. 查看结果，验证用例数量和内容

---

**建议选项功能已完全正常工作！** 🚀
